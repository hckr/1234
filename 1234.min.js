let n,t,o,e=document,i=800,u=300,l=400,c=100,h=20,a=i-h,r=u-h,d=h,s=0,x=0,y=10,m=.2,b=[],k=0,p={},M=!1,v=3e3,w=Math.random,C=Math.abs,T=setTimeout,g=setInterval;onblur=(()=>{M=!0}),onfocus=(()=>{M=!1}),g((()=>{M||(k+=1,k%5==0&&v>100&&(v-=100))}),1e3),e.body.style.background="#333",e.body.innerHTML=`<canvas id="_" width="${i}" height="${u}" style="background:white;position:absolute;top:50%;left:50%;margin:-${u/2}px 0 0 -${i/2}px"></canvas>`,n=_.getContext("2d"),e.onkeydown=(n=>{p[n.keyCode]=!0}),e.onkeyup=(n=>{p[n.keyCode]=!1}),o=(()=>{if(T(o,v),!M){let n=2*w()+2,t=100*w()+100;w()<.5?b.push({x:i,h:t,v:-n}):b.push({x:0,h:t,v:n})}}),T(o,v),g((()=>{M||(p[37]&&(s-=1)<-10&&(s=-10),p[39]&&(s+=1)>10&&(s=10),s*=.9,l+=s,l<=d&&(l=d,s=-s),l>=a&&(l=a,s=-s),p[38]&&c==r&&(x=y),x-=m,c-=x,c>=r&&(c=r,x=.8*-x),b.filter((n=>{return C(n.x-l)<h&&(u-n.h-c<h&&Math.sqrt(C(n.x-l)+C(u-n.h-c))<h||c>=u-n.h&&c>=u-n.h)&&(M=!0,t(),alert("You lost."),location.reload()),n.x+=n.v,0<n.x&&n.x<i})))}),15),f="fillStyle",(t=(()=>{_.width=_.width,n[f]="#5f5",n.arc(l,c,h,0,2*Math.PI),n.fill(),n.font="24px monospace",n[f]="#000",n.fillText(k,10,28),n[f]="#f55";for(let o of b)n.fillRect(o.x-1,u-o.h,3,o.h);requestAnimationFrame(t)}))();