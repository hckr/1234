let n,t,o,e=document,i=800,u=300,l=400,a=100,c=20,r=i-c,h=u-c,s=c,d=0,x=0,y=10,m=.2,v=[],b=0,k={},p=!1,M=3e3,I=Math.random,w=Math.abs;onblur=(()=>{p=!0}),onfocus=(()=>{p=!1}),setInterval((()=>{p||(b+=1,b%5==0&&M>100&&(M-=100))}),1e3),e.body.style.background="#333",e.body.innerHTML=`<canvas id="_" width="${i}" height="${u}" style="background:white;position:absolute;top:50%;left:50%;margin:-${u/2}px 0 0 -${i/2}px"></canvas>`,n=_.getContext("2d"),e.onkeydown=(n=>{k[n.keyCode]=!0}),e.onkeyup=(n=>{k[n.keyCode]=!1}),setInterval((()=>{if(!p){let n=2*I()+2,t=100*I()+100;I()<.5?v.push({x:i+1,h:t,v:-n}):v.push({x:-1,h:t,v:n})}}),M),t=setInterval((()=>{p||(k[37]&&(d-=1)<-10&&(d=-10),k[39]&&(d+=1)>10&&(d=10),d*=.9,l+=d,l<=s&&(l=s,d=-d),l>=r&&(l=r,d=-d),k[38]&&a==h&&(x=y),x-=m,a-=x,a>=h&&(a=h,x=.8*-x),v.filter((n=>{return w(n.x-l)<c&&(u-n.h-a<c&&Math.sqrt(w(n.x-l)+w(u-n.h-a))<c||a>=u-n.h&&a>=u-n.h)&&(p=!0,setTimeout((()=>{alert("You lost."),location.reload()}),100)),n.x+=n.v,-1<n.x&&n.x<i+1})))}),15),f="fillStyle",(o=(()=>{_.width=_.width,n[f]="#5f5",n.arc(l,a,c,0,2*Math.PI),n.fill(),n.font="24px monospace",n[f]="#000",n.fillText(b,10,28),n[f]="#f55";for(let t of v)n.fillRect(t.x-1,u-t.h,3,t.h);requestAnimationFrame(o)}))();