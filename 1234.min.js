let n,t,o,e=document,i=800,u=300,c=400,l=100,h=20,a=i-h,r=u-h,d=h,s=0,x=0,y=10,m=.2,b=[],k=0,p={},M=!1,v=3e3,T=Math.random,w=Math.abs,C=setTimeout,g=setInterval;onblur=(()=>{M=!0}),onfocus=(()=>{M=!1}),g((()=>{M||(k+=1,k%5==0&&v>100&&(v-=100))}),1e3),e.body.style.background="#333",e.body.innerHTML=`<canvas id="_" width="${i}" height="${u}" style="background:white;position:absolute;top:50%;left:50%;margin:-${u/2}px 0 0 -${i/2}px"></canvas>`,n=_.getContext("2d"),e.onkeydown=(n=>{p[n.keyCode]=!0}),e.onkeyup=(n=>{p[n.keyCode]=!1}),o=(()=>{if(C(o,v),!M){let n=2*T()+2,t=100*T()+100;T()<.5?b.push({x:i,h:t,v:-n}):b.push({x:0,h:t,v:n})}}),C(o,v),g((()=>{M||(p[37]&&(s-=1)<-10&&(s=-10),p[39]&&(s+=1)>10&&(s=10),s*=.9,c+=s,c<=d&&(c=d,s=-s),c>=a&&(c=a,s=-s),p[38]&&l==r&&(x=y),x-=m,l-=x,l>=r&&(l=r,x=.8*-x),b.filter((n=>{return w(n.x-c)<h&&(u-n.h-l<h&&Math.sqrt(w(n.x-c)+w(u-n.h-l))<h||l>=u-n.h&&l>=u-n.h)&&(M=!0,setTimeout((()=>{alert("You lost."),location.reload()}),100)),n.x+=n.v,0<n.x&&n.x<i})))}),15),f="fillStyle",(t=(()=>{_.width=_.width,n[f]="#5f5",n.arc(c,l,h,0,2*Math.PI),n.fill(),n.font="24px monospace",n[f]="#000",n.fillText(k,10,28),n[f]="#f55";for(let o of b)n.fillRect(o.x-1,u-o.h,3,o.h);requestAnimationFrame(t)}))();